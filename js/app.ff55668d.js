(function(){"use strict";var e={6633:function(e,t,n){var l=n(9242),o=n(3396);const a=(0,o.Uk)("Home"),i=(0,o.Uk)(" | "),r=(0,o.Uk)("About");function s(e,t){const n=(0,o.up)("router-link"),l=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("nav",null,[(0,o.Wm)(n,{to:"/"},{default:(0,o.w5)((()=>[a])),_:1}),i,(0,o.Wm)(n,{to:"/about"},{default:(0,o.w5)((()=>[r])),_:1})]),(0,o.Wm)(l)],64)}var u=n(89);const c={},d=(0,u.Z)(c,[["render",s]]);var m=d,p=n(678),f=n(7139);const h={class:"home"},v={class:"input-container"},g={class:"input-container"};function b(e,t,n,l,a,i){const r=(0,o.up)("NumberInput"),s=(0,o.up)("SliderInput"),u=(0,o.up)("MineSweeper");return(0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("div",v,[(0,o.Wm)(r,{class:"input",min:1,max:99,modelValue:a.config.cols,"onUpdate:modelValue":t[0]||(t[0]=e=>a.config.cols=e),label:"Width"},null,8,["modelValue"]),(0,o.Wm)(r,{class:"input",min:1,max:99,modelValue:a.config.rows,"onUpdate:modelValue":t[1]||(t[1]=e=>a.config.rows=e),label:"Height"},null,8,["modelValue"]),(0,o.Wm)(r,{class:"input",min:1,max:999,modelValue:a.config.mines,"onUpdate:modelValue":t[2]||(t[2]=e=>a.config.mines=e),label:"Mines"},null,8,["modelValue"])]),(0,o._)("div",g,[(0,o.Wm)(s,{class:"input",min:1,max:2,step:"0.1",modelValue:a.config.zoom,"onUpdate:modelValue":t[3]||(t[3]=e=>a.config.zoom=e),label:"Zoom"},null,8,["modelValue"])]),(0,o.Wm)(u,(0,f.vs)((0,o.F4)(a.config)),null,16)])}const _={class:"board__header"},C=["onClick","onContextmenu","onMouseup","onMousedown","data-content","data-flag"];function w(e,t,n,a,i,r){return(0,o.wg)(),(0,o.iD)("div",{class:"board",style:(0,f.j5)(r.cssVars)},[(0,o._)("header",_,[(0,o._)("button",{class:"header__button header__button--bombs",onClick:t[0]||(t[0]=(...e)=>r.loseGame&&r.loseGame(...e)),title:"End game"},(0,f.zw)(r.minesButtonLabel),1),(0,o._)("button",{class:"header__button header__button--start",onClick:t[1]||(t[1]=(...e)=>r.startGame&&r.startGame(...e)),title:"Restart game"},(0,f.zw)(r.mainButtonLabel),1),(0,o._)("button",{class:"header__button header__button--flags",onClick:t[2]||(t[2]=(...e)=>r.retrieveFlags&&r.retrieveFlags(...e)),title:"Remove flags"},(0,f.zw)(r.flagsButtonLabel),1)]),(0,o._)("section",{class:(0,f.C_)(["board__gamearea",{"board__gamearea--ready":i.ready}])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.cells,((e,t)=>((0,o.wg)(),(0,o.iD)("button",{key:`cell-${t}`,class:(0,f.C_)(["board__cell",{"board__cell--open":e.open,"board__cell--boom":e.open&&-1===e.value&&e.index===i.explosionIndex,"board__cell--active":!e.open&&e.active}]),onClick:[(0,l.iM)((t=>r.probeCell(e)),["left","exact"]),(0,l.iM)((t=>r.probeAreaAroundCell(e)),["ctrl","exact"])],onContextmenu:(0,l.iM)((t=>r.toggleCellFlag(e)),["right","prevent"]),onMouseup:(0,l.iM)((t=>r.probeAreaAroundCell(e)),["middle","prevent"]),onMousedown:[(0,l.iM)((t=>r.activateCell(e)),["left","exact"]),(0,l.iM)((t=>r.activateCells(e)),["middle"]),(0,l.iM)((t=>r.activateCells(e)),["ctrl","exact"])],"data-content":e.value,"data-flag":e.flag||void 0},[(0,o._)("span",null,(0,f.zw)(r.computedCellsContent[t]),1)],42,C)))),128))],2)],4)}const y=-1;var x={name:"MineSweeper",props:{rows:{type:Number,default:16,validator(e){return e>0}},cols:{type:Number,default:16,validator(e){return e>0}},mines:{type:Number,default:16},zoom:{type:Number,default:1}},computed:{cssVars(){return{"--cell-size":`calc(${this.zoom} * ${this.cellSize}`,"--board-width":`calc(${this.zoom} * ${this.cellSize} * ${this.cols})`}},cellsCount(){return this.rows*this.cols},computedMines(){return Math.min(this.mines,this.cellsCount)},minesButtonLabel(){return`💣 ${this.computedMines}`},flagsButtonLabel(){return`${this.flags} 🚩`},mainButtonLabel(){return this.won?"😎":this.activeCells.length>0?"😮":this.ready?"🙂":"😵"},computedCellsContent(){return this.cells.map((e=>e.open?e.value===y?"💣":e.flag?"❌":`${e.value}`:e.flag?"🚩":null))}},watch:{cellsCount(e){e>0&&this.startGame()},computedMines(e){e>0&&this.startGame()}},data(){return{cells:[],activeCells:[],explosionIndex:null,ready:!1,won:!1,flags:0,cellSize:"1.5rem"}},methods:{checkGameWon(){const e=this.cells.filter((e=>!e.open)).every((e=>e.value===y));e&&this.endGame()},toggleCellFlag(e){e.open||(e.flag=!e.flag,e.flag?this.flags--:this.flags++)},digCell(e){e.flag||(e.open=!0,0===e.value&&this.getNeighbourCells(e.index).filter((e=>!e.open)).forEach((e=>this.digCell(e))))},probeCell(e){e.flag||e.open||(e.value!==y?(this.digCell(e),this.checkGameWon()):this.endGame(e))},probeAreaAroundCell(e){if(!e.open)return;const t=this.getNeighbourCells(e.index).filter((e=>!e.open)),n=t.some((e=>e.value!==y&&e.flag)),l=t.find((e=>e.value===y&&!e.flag));n&&l?this.endGame(l):l||(t.forEach((e=>this.digCell(e))),this.checkGameWon())},activateCell(e){e.flag||e.open||(e.active=!0,this.activeCells.push(e))},activateCells(e){this.getNeighbourCells(e.index).forEach((e=>this.activateCell(e)))},deactivateCells(){this.activeCells.forEach((e=>e.active=!1)),this.activeCells=[]},getNeighbourCellsIndexes(e){const[t,n]=[Math.floor(e/this.cols),e%this.cols],l=[-1,0,1].map((e=>t+e)).filter((e=>e>=0&&e<this.rows)).map((e=>[-1,0,1].map((e=>n+e)).filter((e=>e>=0&&e<this.cols)).map((t=>e*this.cols+t)))).flat();return l},getNeighbourCells(e){return this.getNeighbourCellsIndexes(e).map((e=>this.cells[e]))},loseGame(){this.endGame(this.cells.find((e=>-1===e.value)))},retrieveFlags(){this.flags!==this.computedMines&&(this.cells.forEach((e=>e.flag=!1)),this.flags=this.computedMines)},endGame(e){const t=!!e;t?(this.explosionIndex=e.index,this.cells.forEach((e=>e.open=!0))):(this.won=!0,this.flags=0,this.cells.forEach((e=>{e.value===y?e.flag=!0:e.open=!0}))),this.ready=!1},startGame(){this.won=!1,this.flags=this.computedMines,this.cells=Array(this.cellsCount).fill({value:null,index:null,flag:!1,open:!1,active:!1}).map(((e,t)=>({...e,value:t<this.computedMines?y:0}))).sort((()=>.5-Math.random())).map(((e,t,n)=>{if(e.value===y)return{...e,index:t};const l=this.getNeighbourCellsIndexes(t).map((e=>n[e])).filter((e=>e.value===y));return{...e,index:t,value:l.length}})),this.ready=!0,this.checkGameWon()}},mounted(){document.addEventListener("mouseup",this.deactivateCells),this.startGame()},beforeUnmount(){document.removeEventListener("mouseup",this.deactivateCells)}};const M=(0,u.Z)(x,[["render",w],["__scopeId","data-v-afa555e0"]]);var V=M;const k={class:"wrapper"},I={class:"component__label"},G=["value"];function N(e,t,n,l,a,i){return(0,o.wg)(),(0,o.iD)("div",k,[(0,o._)("label",I,(0,f.zw)(n.label),1),(0,o._)("input",(0,o.dG)(e.$attrs,{value:n.modelValue,type:"number",class:"component__input",onBlur:t[0]||(t[0]=(...e)=>i.onBlur&&i.onBlur(...e)),onInput:t[1]||(t[1]=(...e)=>i.onInput&&i.onInput(...e))}),null,16,G)])}var z={name:"NumberInput",props:{label:String,modelValue:Number},methods:{updateValue(e){this.$emit("update:modelValue",e)},onInput(e){this.updateValue(parseInt(e.target.value))},onBlur(){let e=this.modelValue||0;const{min:t,max:n}=this.$attrs;t&&(e=Math.max(e,t)),n&&(e=Math.min(e,n)),e!==this.modelValue&&this.updateValue(e)}}};const E=(0,u.Z)(z,[["render",N],["__scopeId","data-v-7a29c71d"]]);var S=E;const O={class:"wrapper"},$={class:"component__label"},j=["value"];function W(e,t,n,l,a,i){return(0,o.wg)(),(0,o.iD)("div",O,[(0,o._)("label",$,(0,f.zw)(n.label),1),(0,o._)("input",(0,o.dG)(e.$attrs,{value:n.modelValue,type:"range",class:"component__input",onInput:t[0]||(t[0]=(...e)=>i.onInput&&i.onInput(...e))}),null,16,j)])}var A={name:"SliderInput",props:{label:String,modelValue:Number},methods:{updateValue(e){this.$emit("update:modelValue",e)},onInput(e){this.updateValue(parseFloat(e.target.value))}}};const B=(0,u.Z)(A,[["render",W],["__scopeId","data-v-3a4d1354"]]);var L=B,F={name:"HomeView",components:{MineSweeper:V,NumberInput:S,SliderInput:L},data(){return{config:{rows:20,cols:40,mines:60,zoom:1}}}};const T=(0,u.Z)(F,[["render",b],["__scopeId","data-v-7d382593"]]);var U=T;const D=[{path:"/",name:"home",component:U},{path:"/about",name:"about",component:()=>n.e(443).then(n.bind(n,1877))}],P=(0,p.p7)({history:(0,p.PO)("/vue-minesweeper/"),routes:D});var Z=P,H=n(65),R=(0,H.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,l.ri)(m).use(R).use(Z).mount("#app")}},t={};function n(l){var o=t[l];if(void 0!==o)return o.exports;var a=t[l]={exports:{}};return e[l](a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,l,o,a){if(!l){var i=1/0;for(c=0;c<e.length;c++){l=e[c][0],o=e[c][1],a=e[c][2];for(var r=!0,s=0;s<l.length;s++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](l[s])}))?l.splice(s--,1):(r=!1,a<i&&(i=a));if(r){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[l,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,l){return n.f[l](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/about.01ee0fa4.js"}}(),function(){n.miniCssF=function(e){}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue-minesweeper:";n.l=function(l,o,a,i){if(e[l])e[l].push(o);else{var r,s;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==l||d.getAttribute("data-webpack")==t+a){r=d;break}}r||(s=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,n.nc&&r.setAttribute("nonce",n.nc),r.setAttribute("data-webpack",t+a),r.src=l),e[l]=[o];var m=function(t,n){r.onerror=r.onload=null,clearTimeout(p);var o=e[l];if(delete e[l],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),s&&document.head.appendChild(r)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/vue-minesweeper/"}(),function(){var e={143:0};n.f.j=function(t,l){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)l.push(o[2]);else{var a=new Promise((function(n,l){o=e[t]=[n,l]}));l.push(o[2]=a);var i=n.p+n.u(t),r=new Error,s=function(l){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var a=l&&("load"===l.type?"missing":l.type),i=l&&l.target&&l.target.src;r.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",r.name="ChunkLoadError",r.type=a,r.request=i,o[1](r)}};n.l(i,s,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,a,i=l[0],r=l[1],s=l[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(s)var c=s(n)}for(t&&t(l);u<i.length;u++)a=i[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},l=self["webpackChunkvue_minesweeper"]=self["webpackChunkvue_minesweeper"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=n.O(void 0,[998],(function(){return n(6633)}));l=n.O(l)})();
//# sourceMappingURL=app.ff55668d.js.map